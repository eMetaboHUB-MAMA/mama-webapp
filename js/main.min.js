var userData=null;function initMama(){if(localStorage.getItem("collapsed")!=null&&localStorage.getItem("collapsed")=="true"){$(".row-offcanvas").toggleClass("active");$(".collapse").toggleClass("in").toggleClass("hidden-xs").toggleClass("visible-xs");$("#collapseLeftPanelBtn").removeClass("active");$("#collapseLeftPanelBtn i").removeClass("fa-chevron-circle-left").addClass("fa-chevron-circle-right");document.getElementById("page-wrapper").style.marginLeft="50px";document.getElementById("sidebar").style.width="50px"}$(".mama-menu").hide();loadTopMenu();loadLeftPanel()}$(document).ready(function(){$("[data-toggle=offcanvas]").click(function(){$(".row-offcanvas").toggleClass("active");$(".collapse").toggleClass("in").toggleClass("hidden-xs").toggleClass("visible-xs");if($("#page-wrapper").css("margin-left")!="50px"){$("#page-wrapper").css("margin-left","50px");$("#sidebar").css("width","50px");$("#collapseLeftPanelBtn").removeClass("active");$("#collapseLeftPanelBtn i").removeClass("fa-chevron-circle-left").addClass("fa-chevron-circle-right");localStorage.setItem("collapsed",true)}else{$("#page-wrapper").css("margin-left","250px");$("#sidebar").css("width","250px");$("#collapseLeftPanelBtn").removeClass("active");$("#collapseLeftPanelBtn i").removeClass("fa-chevron-circle-right").addClass("fa-chevron-circle-left");localStorage.setItem("collapsed",false)}});var a=getUrlParameter("page");if(a===undefined){a="default"}a=a.replace(new RegExp("/","g"),"_");a=a.replace(new RegExp("\\.","g"),"_");$.get("controllers/mainContentController.php?page="+a+"",function(b){$("#page-wrapper").html(b);loadLang()})});loadTopMenu=function(){$("#userName").html("");$.getJSON("controllers/topMenuController.php",function(a){$.each(a.lang,function(c,b){});$.each(a.login,function(c,b){$(".mama-menu-"+b).show()});userData=a.user;if(a.user.firstName!=undefined){$("#userName").html(a.user.firstName+" "+a.user.lastName)}})};loadLeftPanel=function(){$(".mama-collapse").show();$.getJSON("controllers/leftPanelController.php",function(a){$.each(a,function(c,b){switch(b){case"default":$(".mama-menu-default").show();break;case"create-account":$(".mama-menu-create-account").show();break;case"dashboard":$(".mama-menu-dashboard").show();case"new-analysis":$(".mama-menu-new-analysis").show();break;default:$(".mama-menu-"+b).show();break}})})};var getUrlParameter=function getUrlParameter(a){var d=decodeURIComponent(window.location.search.substring(1)),c=d.split("&"),e,b;for(b=0;b<c.length;b++){e=c[b].split("=");if(e[0]===a){return e[1]===undefined?true:e[1]}}};$(document).ready(function(){});var langLoaded=false;function loadLang(){if(localStorage.lang=="fr"){$("html").prop("lang","fr")}else{localStorage.lang="en"}$("#lang-"+localStorage.lang).addClass("fa-check");if(!langLoaded){$.localise("lang/messages",{language:localStorage.lang,loadBase:true});langLoaded=true}$.each($(".lang"),function(){$("#"+$(this).prop("id")).html(window[$(this).prop("id")])});$.each($(".lang[placeholder]"),function(){$(this).attr("placeholder",window[$(this).prop("lang")])});$.each($(".lang-class"),function(){$($(this)).html(window[$($(this)).attr("class").replace("lang-class","").replace(".","").replace(" ","")])});try{buildProjectsStats()}catch(a){}try{buildUsersChart()}catch(a){}}setLang=function(a){langLoaded=false;$(".setLang").removeClass("fa-check");switch(a){case"fr":localStorage.lang="fr";break;case"en":default:localStorage.lang="en"}loadLang()};var today=new Date();var dd=today.getDate();var mm=today.getMonth()+1;var yyyy=today.getFullYear();if(dd<10){dd="0"+dd}if(mm<10){mm="0"+mm}var lastYear=(yyyy-1)+"-"+mm+"-"+dd;var today=yyyy+"-"+mm+"-"+dd;$(document).ready(function(){$(".multiselect").multiselect()});function resizeEventsElements(){if($("#messages-light-list-container").length){$($("#events-light-list-container .list-group-item")).css("min-width",$($("#messages-light-list-container")[0]).css("width"))}}$(document).ready(function(){resizeEventsElements()});$(window).resize(function(){waitForFinalEvent(function(){console.log("Resize...");resizeEventsElements()},15,"some unique string")});var waitForFinalEvent=(function(){var a={};return function(d,b,c){if(!c){c="Don't call this twice without a uniqueId"}if(a[c]){clearTimeout(a[c])}a[c]=setTimeout(d,b)}})();function formatDate(){var e=new Date();var d=e.getFullYear();var f=(e.getMonth()+1);if(f<10){f="0"+f}var b=e.getDate();if(b<10){b="0"+b}var a=e.getHours();if(a<10){a="0"+a}var c=e.getMinutes();if(c<10){c="0"+c}var g=d+"-"+f+"-"+b+" "+a+":"+c;return g};